(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login/index1"],{"067b":function(t,i,e){},"1d2c":function(t,i,e){"use strict";e.r(i);var n=e("2ada"),o=e.n(n);for(var a in n)"default"!==a&&function(t){e.d(i,t,function(){return n[t]})}(a);i["default"]=o.a},"2ada":function(t,i,e){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=e("6740"),o=e("1fc7"),a={mixins:[o.goBack,o.jumpBackPage],data:function(){return{maxMobile:11,mobile:"",pwd:"",isCaptcha:!1,captcha:"",captchaUrl:"",btnb:"btn btn-square btn-c btn-all",weixinBrowser:!1,thirdPartyLogins:[]}},onLoad:function(t){t.invitecode&&this.$db.set("invitecode",t.invitecode),this.weixinBrowser=this.$common.isWeiXinBrowser(),this.weixinBrowser&&this.getAuths()},onShow:function(){this.$db.get("userToken")&&t.switchTab({url:"/pages/index/index"})},computed:{loginButtonClass:function(){return this.mobile&&11===this.mobile.length&&this.pwd?this.btnb+" btn-b":this.btnb},logoImage:function(){var t=this.$store.state.config.shop_logo;return void 0==t&&(t="/static/img/default.jpg"),t},getThirdLoginImg:function(t){return function(t){return"Wxofficial"==t?"/static/image/ic-wechat.png":"weixin"==t?"/static/image/ic-wechat.png":void 0}}},methods:{rightMobile:function(){var t={};return this.mobile?/^1[3456789]{1}\d{9}$/gi.test(this.mobile)?this.pwd?t.status=!0:(t.status=!1,t.msg="请输入密码"):(t.status=!1,t.msg="手机号格式不正确"):(t.status=!1,t.msg="请输入手机号"),t},loginHandler:function(){this.mobile&&11===this.mobile.length&&this.pwd&&(this.rightMobile().status?this.toLogin():this.$common.errorToShow(this.rightMobile().msg))},getCaptchaUrl:function(){this.captchaUrl=this.$config.apiBaseUrl+"captcha.html"},toReg:function(){this.$common.navigateTo("/pages/login/register/index")},toLogin:function(){var t=this,i={mobile:this.mobile,password:this.pwd};this.isCaptcha&&(i.captcha=this.captcha);var e=this.$db.get("invitecode");e&&(i.invitecode=e),this.$api.login(i,function(i){i.status?(t.$db.set("userToken",i.data),t.redirectHandler()):t.$common.errorToShow(i.msg,function(){10013!==i.data&&10012!==i.data||(t.isCaptcha=!0),t.isCaptcha&&t.getCaptchaUrl()})})},redirectHandler:function(){this.$db.del("invitecode"),this.handleBack()},selectLoginType:function(){this.$common.redirectTo("/pages/login/login/index")},getAuths:function(){var t=this,i={url:n.baseUrl+"wap/pages/author"};this.$api.getTrustLogin(i,function(i){i.status&&(t.thirdPartyLogins=i.data)})},handleThirdLogin:function(t){this.$common.redirectTo("");var i=this.$store.state.redirectPage;this.$db.set("redirectPage",i),window.location.href=t},getAppAuths:function(){var i=this;i.thirdPartyLogins=[],t.getProvider({service:"oauth",success:function(t){"getProvider:ok"==t.errMsg&&(i.thirdPartyLogins=t.provider)}})},handleThirdLoginApp:function(i){t.showLoading({title:"加载中"});var e=this;t.login({provider:i,success:function(n){t.getUserInfo({provider:i,success:function(n){if("getUserInfo:ok"==n.errMsg){var o={user:n.userInfo,type:i},a=e.$db.get("invitecode");a&&(o.invitecode=a),e.$api.appTrustLogin(o,function(i){if(t.hideLoading(),i.status){if("undefined"!=typeof i.data.token)return e.$db.set("userToken",i.data.token),t.navigateBack({delta:1}),!1;t.redirectTo({url:"/pages/login/login/index?user_wx_id="+i.data.user_wx_id})}else e.$common.errorToShow("登录失败，请重试")})}else t.hideLoading(),e.$common.errorToShow("登录失败，请重试")}})}})}}};i.default=a}).call(this,e("543d")["default"])},"3cd0":function(t,i,e){"use strict";e.r(i);var n=e("4fa1"),o=e("1d2c");for(var a in o)"default"!==a&&function(t){e.d(i,t,function(){return o[t]})}(a);e("d6b7");var s=e("2877"),r=Object(s["a"])(o["default"],n["a"],n["b"],!1,null,null,null);i["default"]=r.exports},4981:function(t,i,e){"use strict";e("faac");var n=a(e("b0ce")),o=a(e("3cd0"));function a(t){return t&&t.__esModule?t:{default:t}}Page((0,n.default)(o.default))},"4fa1":function(t,i,e){"use strict";var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("view",{staticClass:"content"},[e("view",{staticClass:"login-t"},[e("image",{staticClass:"login-logo",attrs:{src:t.logoImage,mode:"aspectFill"}})]),e("view",[e("view",{staticClass:"login-m"},[e("view",{staticClass:"login-item"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.mobile,expression:"mobile"}],attrs:{type:"number",maxlength:t.maxMobile,placeholder:"请输入手机号码","placeholder-class":"login-item-i-p",eventid:"4bc55440-0"},domProps:{value:t.mobile},on:{input:function(i){i.target.composing||(t.mobile=i.target.value)}}})]),e("view",{staticClass:"login-item flc"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.pwd,expression:"pwd"}],staticClass:"login-item-input",attrs:{password:!0,"placeholder-class":"login-item-i-p",type:"text",placeholder:"请输入密码",eventid:"4bc55440-1"},domProps:{value:t.pwd},on:{input:function(i){i.target.composing||(t.pwd=i.target.value)}}})]),t.isCaptcha?e("view",{staticClass:"login-item"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.captcha,expression:"captcha"}],staticClass:"login-item-input",attrs:{"placeholder-class":"login-item-i-p",type:"text",placeholder:"输入验证码",eventid:"4bc55440-2"},domProps:{value:t.captcha},on:{input:function(i){i.target.composing||(t.captcha=i.target.value)}}}),e("img",{staticClass:"codeimg",attrs:{src:t.captchaUrl,alt:""}})]):t._e()]),e("view",{staticClass:"login-b"},[e("button",{class:t.loginButtonClass,attrs:{"hover-class":"btn-hover",eventid:"4bc55440-3"},on:{click:t.loginHandler}},[t._v("登录")]),e("view",{staticClass:"login-other flc"},[e("view",{staticClass:"fz12 item",attrs:{eventid:"4bc55440-4"},on:{click:t.selectLoginType}},[t._v("验证码登录")]),e("view",{staticClass:"fz12 item",attrs:{eventid:"4bc55440-5"},on:{click:t.toReg}},[t._v("注册")])])],1)])])},o=[];e.d(i,"a",function(){return n}),e.d(i,"b",function(){return o})},d6b7:function(t,i,e){"use strict";var n=e("067b"),o=e.n(n);o.a}},[["4981","common/runtime","common/vendor"]]]);