(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/goods/payment/auth"],{"4e54":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={data:function(){return{type:"",openid:"",orderId:"",state:""}},onLoad:function(e){this.orderId=e.order_id,this.money=Number(e.money),this.type=Number(e.type),this.uid=Number(e.uid),this.state=this.$common.getQueryString("state"),this.getCode()},methods:{getCode:function(){var e=this.$common.getQueryString("code");e&&this.getOpenId(e)},getOpenId:function(e){var t=this,n={code:e,scope:2,state:this.state};this.$api.getOpenId(n,function(e){e.status?(t.openid=e.data.openid,t.toPayHandler("wechatpay")):t.$common.errorToShow(e.msg)})},checkWXJSBridge:function(e){var t=this,n=setInterval(function(){"undefined"!=typeof window.WeixinJSBridge&&(clearTimeout(n),t.onBridgeReady(e))},200)},onBridgeReady:function(e){var t=this;window.WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:e.appid,timeStamp:e.timeStamp,nonceStr:e.nonceStr,package:e.package,signType:e.signType,paySign:e.paySign},function(n){"get_brand_wcpay_request:ok"===n.err_msg?t.$common.successToShow("支付成功"):"get_brand_wcpay_request:cancel"===n.err_msg?t.$common.errorToShow("取消支付"):t.$common.errorToShow("支付失败"),setTimeout(function(){t.$common.redirectTo("/pages/goods/payment/result?id="+e.payment_id)},1e3)})},toPayHandler:function(e){var t=this,n={payment_code:e,payment_type:this.type};n["ids"]=1==this.type||5==this.type||6==this.type?this.orderId:this.uid,1==this.type&&this.orderId?this.openid&&(n["params"]={trade_type:"JSAPI_OFFICIAL",openid:this.openid}):2==this.type&&this.money?this.openid&&(n["params"]={trade_type:"JSAPI_OFFICIAL",money:this.money,openid:this.openid}):5!=this.type&&6!=this.type||!this.recharge||(n["params"]={trade_type:"JSAPI_OFFICIAL",openid:this.openid,formid:this.orderId}),this.$api.pay(n,function(e){if(e.status){var n=e.data;t.checkWXJSBridge(n)}else t.$common.errorToShow(e.msg)})}}};t.default=i},"736f":function(e,t,n){"use strict";n.r(t);var i=n("9d2b"),o=n("d1e0");for(var a in o)"default"!==a&&function(e){n.d(t,e,function(){return o[e]})}(a);n("9882");var r=n("2877"),s=Object(r["a"])(o["default"],i["a"],i["b"],!1,null,null,null);t["default"]=s.exports},8363:function(e,t,n){"use strict";n("faac");var i=a(n("b0ce")),o=a(n("736f"));function a(e){return e&&e.__esModule?e:{default:e}}Page((0,i.default)(o.default))},"946e":function(e,t,n){},9882:function(e,t,n){"use strict";var i=n("946e"),o=n.n(i);o.a},"9d2b":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},o=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("view",{staticClass:"content"},[n("view",{staticClass:"content-c"},[n("image",{staticClass:"load-img",attrs:{src:"/static/image/loading.gif",mode:""}}),n("view",{staticClass:"load-text color-9"},[e._v("信息加载中.....")])])])}];n.d(t,"a",function(){return i}),n.d(t,"b",function(){return o})},d1e0:function(e,t,n){"use strict";n.r(t);var i=n("4e54"),o=n.n(i);for(var a in i)"default"!==a&&function(e){n.d(t,e,function(){return i[e]})}(a);t["default"]=o.a}},[["8363","common/runtime","common/vendor"]]]);