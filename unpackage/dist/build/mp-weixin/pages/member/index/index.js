(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/member/index/index"],{"3ba2":function(t,e,i){},"4d0c":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("4c3a")),n=i("1fc7");function s(t){return t&&t.__esModule?t:{default:t}}var o={components:{jihaiCopyright:a.default},mixins:[n.checkLogin],data:function(){return{open_id:"",hasLogin:!1,userInfo:{},kefupara:"",afterSaleNums:0,isClerk:!1,alipayNoLogin:!0,alipayName:"",alipayAvatar:"",config:"",orderItems:[{name:"待付款",icon:"/static/image/me-ic-obligation.png",nums:0},{name:"待发货",icon:"/static/image/me-ic-sendout.png",nums:0},{name:"待收货",icon:"/static/image/me-ic-receiving.png",nums:0},{name:"待评价",icon:"/static/image/me-ic-evaluate.png",nums:0}],utilityMenus:{distribution:{name:"分销中心",icon:"/static/image/distribution.png",router:"../distribution/user",unshowItem:!1},coupon:{name:"我的优惠券",icon:"/static/image/ic-me-coupon.png",router:"../coupon/index",unshowItem:!1},balance:{name:"我的余额",icon:"/static/image/ic-me-balance.png",router:"../balance/index",unshowItem:!1},integral:{name:"我的积分",icon:"/static/image/integral.png",router:"../integral/index",unshowItem:!1},address:{name:"地址管理",icon:"/static/image/me-ic-site.png",router:"../address/list",unshowItem:!1},collection:{name:"我的收藏",icon:"/static/image/ic-me-collect.png",router:"../collection/index",unshowItem:!1},history:{name:"我的足迹",icon:"/static/image/ic-me-track.png",router:"../history/index",unshowItem:!1},invite:{name:"邀请好友",icon:"/static/image/ic-me-invite.png",router:"../invite/index",unshowItem:!0},setting:{name:"系统设置",icon:"/static/image/me-ic-set.png",router:"../setting/index",unshowItem:!1}},clerk:[{name:"提货单列表",icon:"/static/image/me-ic-phone.png",router:"../take_delivery/list"},{name:"提货单核销",icon:"/static/image/me-ic-about.png",router:"../take_delivery/index"}]}},onShow:function(){this.initData()},methods:{goLogin:function(){t.navigateTo({url:"/pages/login/choose/index"})},getUserInfo:function(t){var e=this;if("getUserInfo:fail auth deny"==t.detail.errMsg)e.$common.errorToShow("未授权");else{var i={open_id:e.open_id,iv:t.detail.iv,edata:t.detail.encryptedData,signature:t.detail.signature},a=e.$db.get("invitecode");a&&(i.invitecode=a),e.toWxLogin(i)}},getALICode:function(){var e=this,i=this;t.login({scopes:"auth_user",success:function(a){a.authCode?t.getUserInfo({provider:"alipay",success:function(t){if("getUserInfo:ok"==t.errMsg){var e={nickname:t.nickName,avatar:t.avatar};i.aLiLoginStep1(a.authCode,e)}},fail:function(t){this.$common.errorToShow("未取得用户昵称头像信息")}}):e.$common.errorToShow("未取得code")},fail:function(t){this.$common.errorToShow("用户授权失败my.login")}})},getWxCode:function(){var e=this;t.login({scopes:"auth_user",success:function(t){t.code?e.wxLoginStep1(t.code):this.$common.errorToShow("未取得code")},fail:function(t){this.$common.errorToShow("用户授权失败wx.login")}})},wxLoginStep1:function(e){var i=this;this.$api.login1({code:e},function(e){e.status?i.open_id=e.data:i.$common.errorToShow(e.msg,function(){t.navigateBack({delta:1})})})},aLiLoginStep1:function(t,e){var i=this,a={code:t,user_info:e};this.$api.alilogin1(a,function(t){i.alipayNoLogin=!1,t.status?(i.open_id=t.data.user_wx_id,t.data.hasOwnProperty("token")?(i.$db.set("userToken",t.data.token),i.initData()):i.$common.redirectTo("/pages/login/login/index?user_wx_id="+t.data.user_wx_id)):i.$common.errorToShow(t.msg)})},toWxLogin:function(e){var i=this;i.$api.login2(e,function(e){e.status?"undefined"==typeof e.data.token?t.redirectTo({url:"/pages/login/login/index?user_wx_id="+e.data.user_wx_id}):(i.$db.set("userToken",e.data.token),i.initData()):i.$common.errorToShow("登录失败，请重试")})},toLogin:function(){this.$common.navigateTo("../../login/login/index1")},initData:function(){var t=this,e=this;this.$api.shopConfig(function(e){t.config=e,e.open_distribution?t.utilityMenus.invite.unshowItem=!0:(t.utilityMenus.distribution.unshowItem=!0,t.utilityMenus.invite.unshowItem=!1)}),this.$db.get("userToken")?(this.hasLogin=!0,this.$api.userInfo({},function(i){if(i.isSucess){e.userInfo=i.data;var a={};a.nickName=i.data.nickname,a.tel=i.data.mobile,e.kefupara=JSON.stringify(a);var n={ids:"1,2,3,4",isAfterSale:!0};e.$api.getOrderStatusSum(n,function(t){t.status&&(e.orderItems.forEach(function(e,i){e.nums=t.data[i+1]}),e.afterSaleNums=t.data.isAfterSale?t.data.isAfterSale:0)}),t.$api.isStoreUser({},function(e){t.isClerk=e.flag})}})):(this.hasLogin=!1,this.getWxCode())},navigateToHandle:function(t){if(!this.hasLogin)return this.checkIsLogin();this.$common.navigateTo(t)},orderNavigateHandle:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!this.hasLogin)return this.checkIsLogin();this.$store.commit("orderTab",e),this.$common.navigateTo(t)},goAfterSaleList:function(){if(!this.hasLogin)return this.checkIsLogin();this.$common.navigateTo("../after_sale/list")},showChat:function(){}},computed:{kfmobile:function(){return this.$store.state.config.shop_mobile||0}},watch:{}};e.default=o}).call(this,i("543d")["default"])},6606:function(t,e,i){"use strict";i("faac");var a=s(i("b0ce")),n=s(i("7489"));function s(t){return t&&t.__esModule?t:{default:t}}Page((0,a.default)(n.default))},6891:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"content"},[i("view",{staticClass:"member-top"},[i("image",{staticClass:"bg-img",attrs:{src:"/static/image/member-bg.png"}}),i("view",{staticClass:"member-top-c"},[t.hasLogin?[i("image",{staticClass:"user-head-img",attrs:{mode:"aspectFill",src:t.userInfo.icon}}),i("view",{staticClass:"user-name"},[t._v(t._s(t.userInfo.nickname))]),t.userInfo.personalizedSignature?i("view",{staticClass:"fz12 grade"},[t._v(t._s(t.userInfo.personalizedSignature))]):t._e()]:[i("view",{staticClass:"user-head-img"},[i("open-data",{attrs:{type:"userAvatarUrl",mpcomid:"89c9d496-0"}})],1),i("view",[i("button",{staticClass:"login-btn",attrs:{"hover-class":"btn-hover",eventid:"89c9d496-0"},on:{click:function(e){t.goLogin()}}},[t._v("授权登录")])],1)]],2)]),i("view",{staticClass:"cell-group"},[i("view",{staticClass:"cell-item right-img",attrs:{eventid:"89c9d496-1"},on:{click:function(e){t.orderNavigateHandle("../order/orderlist")}}},[t._m(0),t._m(1)])]),i("view",{staticClass:"member-grid"},[t._l(t.orderItems,function(e,a){return i("view",{key:a,staticClass:"member-item",attrs:{eventid:"89c9d496-2-"+a},on:{click:function(e){t.orderNavigateHandle("../order/orderlist",a+1)}}},[e.nums?i("view",{staticClass:"badge color-f"},[t._v(t._s(e.nums))]):t._e(),i("image",{staticClass:"member-item-icon",attrs:{src:e.icon}}),i("text",{staticClass:"member-item-text"},[t._v(t._s(e.name))])])}),i("view",{staticClass:"member-item",attrs:{eventid:"89c9d496-3"},on:{click:t.goAfterSaleList}},[0!=t.afterSaleNums?i("view",{staticClass:"badge color-f"},[t._v(t._s(t.afterSaleNums))]):t._e(),i("image",{staticClass:"member-item-icon",attrs:{src:"/static/image/me-ic-evaluate.png"}}),i("text",{staticClass:"member-item-text"},[t._v("退换货")])])],2),i("view",{staticClass:"cell-group margin-cell-group right-img"},[t._l(t.utilityMenus,function(e,a){return e.unshowItem?t._e():i("view",{key:a,staticClass:"cell-item"},[i("view",{staticClass:"cell-item-hd",attrs:{eventid:"89c9d496-4-"+a},on:{click:function(i){t.navigateToHandle(e.router)}}},[i("image",{staticClass:"cell-hd-icon",attrs:{src:e.icon}}),i("view",{staticClass:"cell-hd-title"},[t._v(t._s(e.name))])]),t._m(2,!0)])}),i("view",{staticClass:"cell-item"},[i("button",{staticClass:"cell-item-hd ",attrs:{"hover-class":"none","open-type":"contact",bindcontact:"showChat","session-from":t.kefupara}},[i("image",{staticClass:"cell-hd-icon",attrs:{src:"/static/image/me-ic-phone.png"}}),i("view",{staticClass:"cell-hd-title"},[t._v("联系客服")])]),t._m(3)],1)],2),t.isClerk?i("view",{staticClass:"cell-group margin-cell-group right-img"},t._l(t.clerk,function(e,a){return i("view",{key:a,staticClass:"cell-item"},[i("view",{staticClass:"cell-item-hd",attrs:{eventid:"89c9d496-5-"+a},on:{click:function(i){t.navigateToHandle(e.router)}}},[i("image",{staticClass:"cell-hd-icon",attrs:{src:e.icon}}),i("view",{staticClass:"cell-hd-title"},[t._v(t._s(e.name))])]),t._m(4,!0)])})):t._e(),i("jihaiCopyright",{attrs:{mpcomid:"89c9d496-3"}})],1)},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"cell-item-hd"},[i("view",{staticClass:"cell-hd-title"},[t._v("我的订单")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"cell-item-ft"},[i("image",{staticClass:"cell-ft-next icon",attrs:{src:"/static/image/right.png"}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"cell-item-ft"},[i("image",{staticClass:"cell-ft-next icon",attrs:{src:"/static/image/right.png"}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"cell-item-ft"},[i("image",{staticClass:"cell-ft-next icon",attrs:{src:"/static/image/right.png"}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"cell-item-ft"},[i("image",{staticClass:"cell-ft-next icon",attrs:{src:"/static/image/right.png"}})])}];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},"695a":function(t,e,i){"use strict";i.r(e);var a=i("4d0c"),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,function(){return a[t]})}(s);e["default"]=n.a},7489:function(t,e,i){"use strict";i.r(e);var a=i("6891"),n=i("695a");for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);i("adf1");var o=i("2877"),c=Object(o["a"])(n["default"],a["a"],a["b"],!1,null,null,null);e["default"]=c.exports},adf1:function(t,e,i){"use strict";var a=i("3ba2"),n=i.n(a);n.a}},[["6606","common/runtime","common/vendor"]]]);