(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/member/order/orderlist"],{"002d":function(t,s,e){"use strict";var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("view",{staticClass:"content"},[e("uni-segmented-control",{attrs:{current:t.tab,values:t.items,"style-type":"text","active-color":"#333",eventid:"25bc17cb-0",mpcomid:"25bc17cb-0"},on:{clickItem:t.onClickItem}}),e("view",{staticClass:"order-list"},[t.list.length?e("view",{staticClass:"goods-detail"},[t._l(t.list,function(s,i){return e("view",{key:i,staticClass:"order-item"},[e("view",{staticClass:"cell-group"},[e("view",{staticClass:"cell-item",attrs:{eventid:"25bc17cb-1-"+i},on:{click:function(e){t.orderDetail(s.order_id)}}},[e("view",{staticClass:"cell-item-hd"},[e("view",{staticClass:"cell-hd-title"},[t._v("订单编号："+t._s(s.order_id))])]),e("view",{staticClass:"cell-item-ft"},[e("text",{staticClass:"cell-ft-text"},[t._v(t._s(s.order_status_name))])])])]),e("view",{staticClass:"img-list"},t._l(s.items,function(a,o){return e("view",{key:o,staticClass:"img-list-item"},[e("image",{staticClass:"img-list-item-l little-img have-none",attrs:{src:a.image_url,mode:"aspectFill"}}),e("view",{staticClass:"img-list-item-r little-right"},[e("view",{staticClass:"little-right-t"},[e("view",{staticClass:"goods-name list-goods-name",attrs:{eventid:"25bc17cb-2-"+i+"-"+o},on:{click:function(e){t.orderDetail(s.order_id)}}},[t._v(t._s(a.name))]),e("view",{staticClass:"goods-price"},[t._v("￥"+t._s(a.price))])]),e("view",{staticClass:"romotion-tip"},t._l(t.formatPromotions(a.promotion_list),function(s,i){return e("view",{key:i,staticClass:"romotion-tip-item"},[t._v(t._s(s))])})),e("view",{staticClass:"goods-item-c"},[e("view",{staticClass:"goods-buy"},[null!==a.addon?e("view",{staticClass:"goods-salesvolume"},[t._v(t._s(a.addon))]):t._e(),e("view",{staticClass:"goods-num"},[t._v("× "+t._s(a.nums))])])])])])})),e("view",{staticClass:"cell-group"},[e("view",{staticClass:"cell-item"},[e("view",{staticClass:"cell-item-ft goods-num"},[e("text",{staticClass:"cell-ft-text"},[t._v("合计"),e("text",{staticClass:"red-price"},[t._v("￥ "+t._s(s.order_amount))])]),e("text",{staticClass:"cell-ft-text"},[t._v("共 "+t._s(s.items.length)+" 件")])])])]),e("view",{staticClass:"order-list-button"},[e("button",{staticClass:"btn btn-circle btn-g",attrs:{"hover-class":"btn-hover",eventid:"25bc17cb-3-"+i},on:{click:function(e){t.orderDetail(s.order_id)}}},[t._v("查看详情")]),1===s.status&&1===s.pay_status?e("button",{staticClass:"btn btn-circle btn-w",attrs:{"hover-class":"btn-hover",eventid:"25bc17cb-4-"+i},on:{click:function(e){t.toPay(s.order_id)}}},[t._v("立即支付")]):t._e(),1===s.status&&2===s.pay_status&&3===s.ship_status&&1===s.confirm?e("button",{staticClass:"btn btn-circle btn-w",attrs:{"hover-class":"btn-hover",eventid:"25bc17cb-5-"+i},on:{click:function(s){t.tackDelivery(i)}}},[t._v("确认收货")]):t._e(),1===s.status&&2===s.pay_status&&3===s.ship_status&&2===s.confirm&&1===s.is_comment?e("button",{staticClass:"btn btn-circle btn-w",attrs:{"hover-class":"btn-hover",eventid:"25bc17cb-6-"+i},on:{click:function(e){t.toEvaluate(s.order_id)}}},[t._v("立即评价")]):t._e()],1)])}),e("uni-load-more",{attrs:{status:t.loadStatus,mpcomid:"25bc17cb-1"}})],2):e("view",{staticClass:"order-none"},[e("image",{staticClass:"order-none-img",attrs:{src:"/static/image/order.png",mode:""}})])])],1)},a=[];e.d(s,"a",function(){return i}),e.d(s,"b",function(){return a})},"2f28":function(t,s,e){"use strict";var i=e("6a63"),a=e.n(i);a.a},"39d3":function(t,s,e){"use strict";e("faac");var i=o(e("b0ce")),a=o(e("abff"));function o(t){return t&&t.__esModule?t:{default:t}}Page((0,i.default)(a.default))},4064:function(t,s,e){"use strict";e.r(s);var i=e("7c71"),a=e.n(i);for(var o in i)"default"!==o&&function(t){e.d(s,t,function(){return i[t]})}(o);s["default"]=a.a},"6a63":function(t,s,e){},"7c71":function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var i=n(e("0efe")),a=n(e("d92d")),o=e("1fc7");function n(t){return t&&t.__esModule?t:{default:t}}function r(t){return u(t)||l(t)||c()}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function l(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function u(t){if(Array.isArray(t)){for(var s=0,e=new Array(t.length);s<t.length;s++)e[s]=t[s];return e}}var d={mixins:[o.orders,o.goods],components:{uniSegmentedControl:i.default,uniLoadMore:a.default},data:function(){return{items:["全部","待付款","待发货","待收货","待评价"],list:[],page:1,limit:5,loadStatus:"more",status:[0,1,2,3,4],isReload:!1}},onLoad:function(){this.initData()},onShow:function(){this.isReload&&this.initData()},computed:{tab:function(){return this.$store.state.orderTab}},methods:{initData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.page=t,this.list=[],this.orderList()},onClickItem:function(t){this.tab!==t&&(this.$store.commit("orderTab",t),this.initData())},orderList:function(){var t=this,s={page:this.page,limit:this.limit,status:this.status[this.tab]};this.loadStatus="loading",this.$api.orderList(s,function(s){if(s.status){var e=s.data.list;s.data.status==t.status[t.tab]&&(t.list=[].concat(r(t.list),r(t.formatOrderStatus(e))),s.data.count>t.list.length?(t.page++,t.loadStatus="more"):t.loadStatus="noMore")}else t.$common.errorToShow(s.msg)}),this.isReload&&(this.isReload=!1)},tackDelivery:function(t){var s=this;this.$common.modelShow("提示","确认执行收货操作吗?",function(){var e={order_id:s.list[t].order_id};s.$api.confirmOrder(e,function(e){e.status?s.$common.successToShow("确认收货成功",function(){0!==s.tab?s.list.splice(t,1):s.initData()}):s.$common.errorToShow(e.msg)})})},formatOrderStatus:function(t){var s=this;return t.forEach(function(t){switch(t.status){case 1:1===t.pay_status&&s.$set(t,"order_status_name","待付款"),2===t.pay_status&&1===t.ship_status&&s.$set(t,"order_status_name","待发货"),2===t.pay_status&&3===t.ship_status&&1===t.confirm&&s.$set(t,"order_status_name","待收货"),2===t.pay_status&&3===t.ship_status&&2===t.confirm&&1===t.is_comment&&s.$set(t,"order_status_name","待评价"),2===t.pay_status&&3===t.ship_status&&2===t.confirm&&2===t.is_comment&&s.$set(t,"order_status_name","已评价"),4===t.pay_status&&s.$set(t,"order_status_name","售后单");break;case 2:s.$set(t,"order_status_name","已完成");break;case 3:s.$set(t,"order_status_name","已取消");break}}),t},formatPromotions:function(t){var s={};return s=JSON.parse(t),s}},onReachBottom:function(){"more"==this.loadStatus&&this.orderList()}};s.default=d},abff:function(t,s,e){"use strict";e.r(s);var i=e("002d"),a=e("4064");for(var o in a)"default"!==o&&function(t){e.d(s,t,function(){return a[t]})}(o);e("2f28");var n=e("2877"),r=Object(n["a"])(a["default"],i["a"],i["b"],!1,null,null,null);s["default"]=r.exports}},[["39d3","common/runtime","common/vendor"]]]);