(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/classify/index"],{"1ba2":function(t,e,s){"use strict";var i=s("c596"),a=s.n(i);a.a},"508e":function(t,e,s){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(s("f557"));function a(t){return t&&t.__esModule?t:{default:t}}var c={data:function(){return{current:0,id:"",showView:!1,goodsList:[],minPrice:"",maxPrice:"",ajaxStatus:!1,loading:!0,loadingComplete:!1,nodata:!1,toView:"",searchData:{where:{},limit:10,page:1,order:{key:"sort",sort:"asc"}},searchKey:"请输入关键字搜索",alllist:!0,allgrid:!1,screents:!0,screentc:!1,sPrice:"",ePrice:"",brand_list:[],cat_list:[],label_list:[]}},onLoad:function(t){var e={};t.id&&(e={cat_id:t.id}),t.key&&(e={search_name:t.key},this.searchKey=t.key),t.type&&("hot"==t.type&&(e={hot:!0}),"recommend"==t.type&&(e={recommend:!0})),t.cat_id&&(e.cat_id=t.cat_id),t.brand_id&&(e.brand_id=t.brand_id),t.hot&&(e.hot=t.hot),t.recommend&&(e.recommend=t.recommend),t.label_id&&(e.label_id=t.label_id),this.setSearchData({where:e}),this.getGoods()},components:{lvvPopup:i.default},methods:{listGrid:function(){0==this.current?this.current=1:this.current=0},setSearchData:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=this.searchData;this.searchData=this.$common.deepCopy(s,t),e&&(this.goodsList=[])},onChangeShowState:function(){var t=this;t.showView=!t.showView},comprehensive:function(){this.setSearchData({order:{key:"sort",sort:"asc"},page:1},!0),this.getGoods()},salesVolume:function(){"buy_count"==this.searchData.order.key?"desc"==this.searchData.order.sort?this.searchData.order.sort="asc":this.searchData.order.sort="desc":this.searchData.order={key:"buy_count",sort:"desc"},this.searchData.page=1,this.setSearchData(this.searchData,!0),this.getGoods()},priceSort:function(){"price"==this.searchData.order.key?"desc"==this.searchData.order.sort?this.searchData.order.sort="asc":this.searchData.order.sort="desc":this.searchData.order={key:"price",sort:"asc"},this.searchData.page=1,this.setSearchData(this.searchData,!0),this.getGoods()},onPullDownRefresh:function(){},goodsDetail:function(t){var e="/pages/goods/index/index?id="+t;this.$common.navigateTo(e)},getGoods:function(){var e=this;return!e.ajaxStatus&&(e.ajaxStatus=!0,e.loading=!0,e.loadingComplete=!1,e.nodata=!0,e.loadingComplete?(e.$common.errorToShow("暂时没有数据了"),!1):void e.$api.goodsList(e.conditions(),function(s){if(s.status){var i=!1;s.data.list.length<e.searchData.limit&&(i=!0);var a=!1;if(1==e.searchData.page&&0==s.data.list.length&&(a=!0),""!=s.data.class_name?t.setNavigationBarTitle({title:s.data.class_name}):s.data.where&&s.data.where.search_name&&""!=s.data.where.search_name&&t.setNavigationBarTitle({title:"商品搜索"}),e.goodsList=e.goodsList.concat(s.data.list),e.ajaxStatus=!1,e.loading=!i&&!a,e.toView="",e.loadingComplete=i&&!a,e.nodata=a,s.data.filter){var c=s.data.filter;if(c.brand_ids){for(var r=0;r<c.brand_ids.length;r++)c.brand_ids[r].isSelect=!1;e.brand_list=c.brand_ids}if(c.goods_cat){for(var l=0;l<c.goods_cat.length;l++)c.goods_cat[l].isSelect=!1;e.cat_list=c.goods_cat}if(c.label_ids){for(var o=0;o<c.label_ids.length;o++)c.label_ids[o].isSelect=!1;e.label_list=c.label_ids}}}}))},lower:function(){var t=this;t.toView="loading",t.loadingComplete||(t.setSearchData({page:t.searchData.page+1}),t.getGoods())},listgrid:function(){var t=this;t.alllist?(t.allgrid=!0,t.listgrid=!0,t.alllist=!1):(t.allgrid=!1,t.listgrid=!1,t.alllist=!0)},conditions:function(){var t=this.searchData,e={};if(e=this.$common.deepCopy(e,t),t.where&&(e.where=JSON.stringify(t.where)),t.order){var s=t.order.key+" "+t.order.sort;"sort"!=t.order.key&&(s+=",sort asc"),e.order=s}else e.order="sort asc";return e},search:function(){this.setSearchData({page:1,where:{search_name:this.keyword}},!0),this.getGoods()},goSearch:function(){var e=getCurrentPages(),s=e[e.length-2];if(s&&s.route){var i=s.route;"pages/index/search"==i?t.navigateBack({delta:1}):this.$common.navigateTo("/pages/index/search")}else this.$common.navigateTo("/pages/index/search")},toshow:function(){this.$refs.lvvpopref.show(),this.screents=!1,this.screentc=!0},toclose:function(){this.$refs.lvvpopref.close(),this.screentc=!1,this.screents=!0},filterNo:function(){this.ePrice="",this.sPrice="";for(var t=0;t<this.cat_list.length;t++)this.cat_list[t].isSelect=!1;for(var e=0;e<this.brand_list.length;e++)this.brand_list[e].isSelect=!1;for(var s=0;s<this.label_list.length;s++)this.label_list[s].isSelect=!1;this.filterOk(),this.toclose()},filterOk:function(){for(var t=this.searchData,e=0;e<this.cat_list.length;e++)this.cat_list[e].isSelect&&(t.where.cat_id=this.cat_list[e].goods_cat_id);for(var s="",i=0;i<this.brand_list.length;i++)this.brand_list[i].isSelect&&(s+=this.brand_list[i].brand_id+",");s&&(s=s.substr(0,s.length-1)),t.where.brand_id=s,t.where.label_id="";for(var a=0;a<this.label_list.length;a++)this.label_list[a].isSelect&&(t.where.label_id=this.label_list[a].id);if(t.where.price_f="",t.where.price_t="",1*this.sPrice<0||""!=this.ePrice&&this.ePrice<=0||1*this.ePrice<0||1*this.sPrice>1*this.ePrice&&""!=this.sPrice&&""!=this.ePrice)return this.$common.errorToShow("价格区间有误"),!1;t.where.price_f=this.sPrice,t.where.price_t=this.ePrice,this.setSearchData(t,!0),this.getGoods(),this.toclose()},selectKey:function(t,e){if("cat_list"==t)for(var s=0;s<this.cat_list.length;s++)this.cat_list[s].goods_cat_id==e?this.cat_list[s].isSelect=!this.cat_list[s].isSelect:this.cat_list[s].isSelect=!1;if("brand_list"==t)for(var i=0;i<this.brand_list.length;i++)this.brand_list[i].brand_id==e&&(this.brand_list[i].isSelect=!this.brand_list[i].isSelect);if("label_list"==t)for(var a=0;a<this.label_list.length;a++)this.label_list[a].id==e?this.label_list[a].isSelect=!this.label_list[a].isSelect:this.label_list[a].isSelect=!1}}};e.default=c}).call(this,s("543d")["default"])},"5d37":function(t,e,s){"use strict";s.r(e);var i=s("e40d"),a=s("b582");for(var c in a)"default"!==c&&function(t){s.d(e,t,function(){return a[t]})}(c);s("1ba2");var r=s("2877"),l=Object(r["a"])(a["default"],i["a"],i["b"],!1,null,null,null);e["default"]=l.exports},b582:function(t,e,s){"use strict";s.r(e);var i=s("508e"),a=s.n(i);for(var c in i)"default"!==c&&function(t){s.d(e,t,function(){return i[t]})}(c);e["default"]=a.a},c596:function(t,e,s){},d68b:function(t,e,s){"use strict";s("faac");var i=c(s("b0ce")),a=c(s("5d37"));function c(t){return t&&t.__esModule?t:{default:t}}Page((0,i.default)(a.default))},e40d:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("view",{staticClass:"content"},[s("view",{staticClass:"search"},[s("view",{staticClass:"search-c",attrs:{eventid:"d10e4748-0"},on:{click:t.goSearch}},[s("view",{staticClass:"search-input search-input-p",class:t.$store.state.searchStyle},[s("view",{staticClass:"search-input-p-c"},[t._v(t._s(t.searchKey))])]),s("image",{staticClass:"icon search-icon",attrs:{src:"/static/image/zoom.png"}})])]),s("view",{staticClass:"screen"},[s("view",{staticClass:"screen-item",attrs:{eventid:"d10e4748-1"},on:{click:t.comprehensive}},[s("text",{staticClass:"screen-item-text"},[t._v("综合")]),s("view",{staticClass:"screen-item-icon"},["sort"==t.searchData.order.key&&"asc"==t.searchData.order.sort?s("image",{staticClass:"screen-item-icon-img",attrs:{src:"/static/image/bottom-black.png"}}):s("image",{staticClass:"screen-item-icon-img",attrs:{src:"/static/image/bottom-gray.png"}})])]),s("view",{staticClass:"screen-item",attrs:{eventid:"d10e4748-2"},on:{click:t.priceSort}},[s("text",{staticClass:"screen-item-text"},[t._v("价格")]),s("view",{staticClass:"screen-item-icon"},["price"==t.searchData.order.key&&"asc"==t.searchData.order.sort?s("image",{staticClass:"screen-item-icon-img",attrs:{src:"/static/image/top-black.png"}}):"price"!=t.searchData.order.key||"asc"!=t.searchData.order.sort?s("image",{staticClass:"screen-item-icon-img",attrs:{src:"/static/image/top-gray.png"}}):t._e(),"price"==t.searchData.order.key&&"desc"==t.searchData.order.sort?s("image",{staticClass:"screen-item-icon-img",attrs:{src:"/static/image/bottom-black.png"}}):t._e(),"price"!=t.searchData.order.key||"desc"!=t.searchData.order.sort?s("image",{staticClass:"screen-item-icon-img",attrs:{src:"/static/image/bottom-gray.png"}}):t._e()])]),s("view",{staticClass:"screen-item",attrs:{eventid:"d10e4748-3"},on:{click:t.salesVolume}},[s("text",{staticClass:"screen-item-text"},[t._v("销量")]),s("view",{staticClass:"screen-item-icon"},["buy_count"==t.searchData.order.key&&"asc"==t.searchData.order.sort?s("image",{staticClass:"screen-item-icon-img",attrs:{src:"/static/image/top-black.png"}}):"buy_count"!=t.searchData.order.key||"asc"!=t.searchData.order.sort?s("image",{staticClass:"screen-item-icon-img",attrs:{src:"/static/image/top-gray.png"}}):t._e(),"buy_count"==t.searchData.order.key&&"desc"==t.searchData.order.sort?s("image",{staticClass:"screen-item-icon-img",attrs:{src:"/static/image/bottom-black.png"}}):t._e(),"buy_count"!=t.searchData.order.key||"desc"!=t.searchData.order.sort?s("image",{staticClass:"screen-item-icon-img",attrs:{src:"/static/image/bottom-gray.png"}}):t._e()])]),s("view",{staticClass:"screen-item"},[s("view",{staticClass:"screen-item-icon",attrs:{"style-type":"button",current:t.current,eventid:"d10e4748-4"},on:{click:t.listGrid}},[0==t.current?s("image",{staticClass:"list-grid",attrs:{src:"/static/image/switch-ic-side-2.png"}}):1==t.current?s("image",{staticClass:"list-grid",attrs:{src:"/static/image/switch-ic-list.png"}}):t._e()])]),t.screents?s("view",{staticClass:"screen-item screents",attrs:{eventid:"d10e4748-6"},on:{click:function(e){t.toshow()}}},[s("text",{staticClass:"screen-item-text"},[t._v("筛选")]),s("image",{staticClass:"filter-img",attrs:{src:"/static/image/top.png"}})]):t.screentc?s("view",{staticClass:"screen-item screents",attrs:{eventid:"d10e4748-5"},on:{click:function(e){t.toclose()}}},[s("text",{staticClass:"screen-item-text"},[t._v("筛选")]),s("image",{staticClass:"filter-img",attrs:{src:"/static/image/bottom.png"}})]):t._e()]),s("lvv-popup",{ref:"lvvpopref",staticStyle:{background:"none"},attrs:{position:"top",mpcomid:"d10e4748-0"}},[s("view",{staticClass:"fliter-c"},[s("scroll-view",{staticStyle:{height:"100%"},attrs:{"scroll-y":"true"}},[s("view",{staticClass:"fliter-item"},[s("view",{staticClass:"cell-item right-img"},[s("view",{staticClass:"cell-item-hd"},[s("view",{staticClass:"cell-hd-title"},[t._v("价格区间")])])]),s("view",{staticClass:"fliter-i-c"},[s("view",{staticClass:"fic-item"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.sPrice,expression:"sPrice"}],staticClass:"fic-item-input",attrs:{type:"number",eventid:"d10e4748-7"},domProps:{value:t.sPrice},on:{input:function(e){e.target.composing||(t.sPrice=e.target.value)}}})]),s("view",{staticClass:"fic-item-line"}),s("view",{staticClass:"fic-item"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.ePrice,expression:"ePrice"}],staticClass:"fic-item-input",attrs:{type:"number",eventid:"d10e4748-8"},domProps:{value:t.ePrice},on:{input:function(e){e.target.composing||(t.ePrice=e.target.value)}}})])])]),t.cat_list.length>0?s("view",{staticClass:"fliter-item"},[s("view",{staticClass:"cell-item right-img"},[s("view",{staticClass:"cell-item-hd"},[s("view",{staticClass:"cell-hd-title"},[t._v("分类")])])]),s("view",{staticClass:"fliter-i-c"},t._l(t.cat_list,function(e,i){return e.goods_cat_id&&e.name?s("view",{key:e.goods_cat_id,attrs:{eventid:"d10e4748-9-"+i},on:{click:function(s){t.selectKey("cat_list",e.goods_cat_id)}}},[e.isSelect?e.isSelect?s("view",{staticClass:"fic-item fic-item-active"},[s("view",{staticClass:"fic-item-text two-line"},[t._v(t._s(e.name))])]):t._e():s("view",{staticClass:"fic-item"},[s("view",{staticClass:"fic-item-text two-line"},[t._v(t._s(e.name))])])]):t._e()}))]):t._e(),t.brand_list.length>0?s("view",{staticClass:"fliter-item"},[s("view",{staticClass:"cell-item right-img"},[s("view",{staticClass:"cell-item-hd"},[s("view",{staticClass:"cell-hd-title"},[t._v("品牌")])])]),s("view",{staticClass:"fliter-i-c"},t._l(t.brand_list,function(e,i){return e.brand_id&&e.name?s("view",{key:e.brand_id,attrs:{eventid:"d10e4748-10-"+i},on:{click:function(s){t.selectKey("brand_list",e.brand_id)}}},[e.isSelect?e.isSelect?s("view",{staticClass:"fic-item fic-item-active"},[s("view",{staticClass:"fic-item-text two-line"},[t._v(t._s(e.name))])]):t._e():s("view",{staticClass:"fic-item"},[s("view",{staticClass:"fic-item-text two-line"},[t._v(t._s(e.name))])])]):t._e()}))]):t._e(),t.label_list.length>0?s("view",{staticClass:"fliter-item"},[s("view",{staticClass:"cell-item right-img"},[s("view",{staticClass:"cell-item-hd"},[s("view",{staticClass:"cell-hd-title"},[t._v("标签")])])]),s("view",{staticClass:"fliter-i-c"},t._l(t.label_list,function(e,i){return e.id&&e.name?s("view",{key:e.id,attrs:{eventid:"d10e4748-11-"+i},on:{click:function(s){t.selectKey("label_list",e.id)}}},[e.isSelect?e.isSelect?s("view",{staticClass:"fic-item fic-item-active"},[s("view",{staticClass:"fic-item-text two-line"},[t._v(t._s(e.name))])]):t._e():s("view",{staticClass:"fic-item"},[s("view",{staticClass:"fic-item-text two-line"},[t._v(t._s(e.name))])])]):t._e()}))]):t._e()]),s("view",{staticClass:"button-bottom"},[s("button",{staticClass:"btn btn-square",attrs:{eventid:"d10e4748-12"},on:{click:function(e){t.toclose()}}},[t._v("关闭")]),s("button",{staticClass:"btn btn-b btn-square",attrs:{eventid:"d10e4748-13"},on:{click:function(e){t.filterOk()}}},[t._v("确定")])],1)],1)]),s("scroll-view",{staticClass:"scroll-Y",attrs:{"scroll-y":"true","scroll-into-view":t.toView,"enable-back-to-top":"true","lower-threshold":"45",eventid:"d10e4748-16"},on:{scrolltolower:t.lower}},[s("view",{directives:[{name:"show",rawName:"v-show",value:0===t.current,expression:"current === 0"}],staticClass:"img-grids"},[t.goodsList.length>0?s("view",t._l(t.goodsList,function(e,i){return s("view",{key:i,staticClass:"img-grids-item",attrs:{eventid:"d10e4748-14-"+i},on:{click:function(s){t.goodsDetail(e.id)}}},[s("image",{staticClass:"img-grids-item-t have-none",attrs:{src:e.image_url,mode:"aspectFill"}}),s("view",{staticClass:"img-grids-item-b"},[s("view",{staticClass:"goods-name grids-goods-name"},[t._v(t._s(e.name))]),s("view",{staticClass:"goods-item-c"},[s("view",{staticClass:"goods-price red-price"},[t._v("￥"+t._s(e.price))]),s("image",{staticClass:"goods-cart",attrs:{src:"/static/image/ic-car.png"}})])])])})):s("view",{staticClass:"order-none"},[s("image",{staticClass:"order-none-img",attrs:{src:"/static/image/order.png",mode:""}})])]),s("view",{directives:[{name:"show",rawName:"v-show",value:1===t.current,expression:"current === 1"}],staticClass:"img-list"},[t.goodsList.length>0?s("view",t._l(t.goodsList,function(e,i){return s("view",{key:i,staticClass:"img-list-item",attrs:{eventid:"d10e4748-15-"+i},on:{click:function(s){t.goodsDetail(e.id)}}},[s("image",{staticClass:"img-list-item-l",attrs:{src:e.image_url,mode:"aspectFill"}}),s("view",{staticClass:"img-list-item-r"},[s("view",{staticClass:"goods-name list-goods-name"},[t._v(t._s(e.name))]),s("view",{staticClass:"goods-item-c"},[s("view",{staticClass:"goods-price red-price"},[t._v("￥"+t._s(e.price))]),s("view",{staticClass:"goods-buy"},[e.comments_count>0?s("view",{staticClass:"goods-salesvolume"},[t._v(t._s(e.comments_count)+"条评论")]):e.comments_count<=0?s("view",{staticClass:"goods-salesvolume"},[t._v("暂无评论")]):t._e(),s("image",{staticClass:"goods-cart",attrs:{src:"/static/image/ic-car.png"}})])])])])})):s("view",{staticClass:"order-none"},[s("image",{staticClass:"order-none-img",attrs:{src:"/static/image/order.png",mode:""}})])])])],1)},a=[];s.d(e,"a",function(){return i}),s.d(e,"b",function(){return a})}},[["d68b","common/runtime","common/vendor"]]]);